{"version":3,"sources":["node_modules/browser-pack/_prelude.js","scripts/direction-reveal.js","scripts/main.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\n/** \n  Direction aware content reveals.\n  \n  @param {Object} object - Container for all options.\n  @param {string} selector - Container element selector.\n  @param {string} itemSelector - Item element selector.\n  @param {string} animationName - Animation CSS class.\n  @param {bollean} enableTouch  - Adds touch event to show content on first click then follow link on the second click.\n  @param {integer} touchThreshold - Touch length must be less than this to trigger reveal which prevents the event triggering if user is scrolling.\n*/\n\nconst DirectionReveal = function({\n  selector: selector = '.direction-reveal',\n  itemSelector: itemSelector = '.direction-reveal__card',\n  animationName: animationName = 'swing',\n  enableTouch: enableTouch = true,\n  touchThreshold: touchThreshold = 250\n} = {}) {\n\n  const containers = document.querySelectorAll(selector);\n  let touchStart;\n\n\n  const _getDirection = function (e, item) {\n    // Width and height of current item\n    let w = item.offsetWidth;\n    let h = item.offsetHeight;\n    let position = _getPosition(item);\n\n    // Calculate the x/y value of the pointer entering/exiting, relative to the center of the item.\n    let x = (e.pageX - position.x - (w / 2) * (w > h ? (h / w) : 1));\n    let y = (e.pageY - position.y - (h / 2) * (h > w ? (w / h) : 1));\n    \n    // Calculate the angle the pointer entered/exited and convert to clockwise format (top/right/bottom/left = 0/1/2/3).  See https://stackoverflow.com/a/3647634 for a full explanation.\n    let d = Math.round(Math.atan2(y, x) / 1.57079633 + 5) % 4;\n\n    // console.table([x, y, w, h, e.pageX, e.pageY, item.offsetLeft, item.offsetTop, position.x, position.y]);\n  \n    return d;\n  };\n\n\n  // https://www.kirupa.com/html5/get_element_position_using_javascript.htm\n  const _getPosition = function (el) {\n    let xPos = 0;\n    let yPos = 0;\n   \n    while (el) {\n      xPos += (el.offsetLeft + el.clientLeft);\n      yPos += (el.offsetTop + el.clientTop);\n   \n      el = el.offsetParent;\n    }\n    return {\n      x: xPos,\n      y: yPos\n    };\n  }\n    \n  const _translateDirection = switchcase({\n    0: 'top',\n    1: 'right',\n    2: 'bottom',\n    3: 'left'\n  })('top');\n  \n\n  const _addClass = function (e, state) {\n    let currentItem = e.currentTarget;\n    let direction = _getDirection(e, currentItem);\n    let directionString = _translateDirection(direction);\n\n    // Remove current animation classes and add current one.\n    let currentCssClasses = currentItem.className.split(' ');\n    let filteredCssClasses = currentCssClasses.filter((cssClass) => (!cssClass.startsWith(animationName))).join(' ');\n    currentItem.className = filteredCssClasses;\n    currentItem.classList.add(`${animationName}--${state}-${directionString}`);\n  };\n\n  \n  const _bindEvents = function (containerItem) {\n    const items = containerItem.querySelectorAll(itemSelector);\n\n    items.forEach((item) => {   \n      \n      _addEventListenerMulti(item, ['mouseenter', 'focus'], function(e) {\n        _addClass(e, 'in');\n      });\n      \n      _addEventListenerMulti(item, ['mouseleave', 'blur'], function(e) {\n        _addClass(e, 'out');\n      });\n\n      if (enableTouch) {\n\n        item.addEventListener('touchstart', function(e) {\n          touchStart = +new Date;\n        });\n\n        item.addEventListener('touchend', function(e) {\n          let touchTime = +new Date - touchStart;\n\n          if (touchTime < touchThreshold && item.getAttribute('data-hover') === null) {\n            e.preventDefault();\n            item.setAttribute('data-hover', 'true');\n            _addClass(e, 'in');\n          }\n        });\n\n      }\n\n    });\n  };\n\n  const _addEventListenerMulti = function (element, events, fn) {\n    events.forEach((e) => element.addEventListener(e, fn));\n  }\n\n\n  const init = function () {\n\n    if (containers.length) {\n      containers.forEach((containerItem) => {\n        _bindEvents(containerItem);\n      });\n    }\n    else {\n      return;\n    }\n\n  };\n\n  // Init is called by default\n  init();\n\n\n  // Reveal API\n  return {\n    init\n  };\n};\n\nexport default DirectionReveal;\n\n\n// Better switch cases - https://hackernoon.com/rethinking-javascript-eliminate-the-switch-statement-for-better-code-5c81c044716d\nexport const switchcase = cases => defaultCase => key =>\nkey in cases ? cases[key] : defaultCase;\n","import DirectionReveal from './direction-reveal.js';\n\n// Swing animation(Default)\nconst directionReveal = DirectionReveal({\n  selector: '.direction-reveal--demo-swing'\n});\n\n// Slide animation with all options specified\nconst directionRevealSlide = DirectionReveal({\n  selector: '.direction-reveal--demo-slide',\n  itemSelector: '.direction-reveal__card',\n  animationName: 'slide',\n  enableTouch: true\n});\n\n// Rotate animation\nconst directionRevealRotate = DirectionReveal({\n  selector: '.direction-reveal--demo-rotate',\n  animationName: 'rotate'\n});\n\n// Bootstrap demo\nconst directionRevealBoostrap = DirectionReveal({\n  selector: '.direction-reveal--demo-bootstrap'\n});\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzY3JpcHRzL2RpcmVjdGlvbi1yZXZlYWwuanMiLCJzY3JpcHRzL21haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7QUNDQTs7Ozs7Ozs7Ozs7QUFXQSxJQUFNLGtCQUFrQixTQUFsQixlQUFrQixHQU1oQjtBQUFBLGlGQUFKLEVBQUk7QUFBQSwyQkFMTixRQUtNO0FBQUEsTUFMSSxRQUtKLGlDQUxlLG1CQUtmO0FBQUEsK0JBSk4sWUFJTTtBQUFBLE1BSlEsWUFJUixxQ0FKdUIseUJBSXZCO0FBQUEsZ0NBSE4sYUFHTTtBQUFBLE1BSFMsYUFHVCxzQ0FIeUIsT0FHekI7QUFBQSw4QkFGTixXQUVNO0FBQUEsTUFGTyxXQUVQLG9DQUZxQixJQUVyQjtBQUFBLGlDQUROLGNBQ007QUFBQSxNQURVLGNBQ1YsdUNBRDJCLEdBQzNCOztBQUVOLE1BQU0sYUFBYSxTQUFTLGdCQUFULENBQTBCLFFBQTFCLENBQW5CO0FBQ0EsTUFBSSxtQkFBSjs7QUFHQSxNQUFNLGdCQUFnQixTQUFoQixhQUFnQixDQUFVLENBQVYsRUFBYSxJQUFiLEVBQW1CO0FBQ3ZDO0FBQ0EsUUFBSSxJQUFJLEtBQUssV0FBYjtBQUNBLFFBQUksSUFBSSxLQUFLLFlBQWI7QUFDQSxRQUFJLFdBQVcsYUFBYSxJQUFiLENBQWY7O0FBRUE7QUFDQSxRQUFJLElBQUssRUFBRSxLQUFGLEdBQVUsU0FBUyxDQUFuQixHQUF3QixJQUFJLENBQUwsSUFBVyxJQUFJLENBQUosR0FBUyxJQUFJLENBQWIsR0FBa0IsQ0FBN0IsQ0FBaEM7QUFDQSxRQUFJLElBQUssRUFBRSxLQUFGLEdBQVUsU0FBUyxDQUFuQixHQUF3QixJQUFJLENBQUwsSUFBVyxJQUFJLENBQUosR0FBUyxJQUFJLENBQWIsR0FBa0IsQ0FBN0IsQ0FBaEM7O0FBRUE7QUFDQSxRQUFJLElBQUksS0FBSyxLQUFMLENBQVcsS0FBSyxLQUFMLENB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QUE0QixFQUE1QixDQUFQO0FBQUEsS0FBZjtBQUNELEdBRkQ7O0FBS0EsTUFBTSxPQUFPLFNBQVAsSUFBTyxHQUFZOztBQUV2QixRQUFJLFdBQVcsTUFBZixFQUF1QjtBQUNyQixpQkFBVyxPQUFYLENBQW1CLFVBQUMsYUFBRCxFQUFtQjtBQUNwQyxvQkFBWSxhQUFaO0FBQ0QsT0FGRDtBQUdELEtBSkQsTUFLSztBQUNIO0FBQ0Q7QUFFRixHQVhEOztBQWFBO0FBQ0E7O0FBR0E7QUFDQSxTQUFPO0FBQ0w7QUFESyxHQUFQO0FBR0QsQ0FqSUQ7O2tCQW1JZSxlOztBQUdmOztBQUNPLElBQU0sa0NBQWEsU0FBYixVQUFhO0FBQUEsU0FBUztBQUFBLFdBQWU7QUFBQSxhQUNsRCxPQUFPLEtBQVAsR0FBZSxNQUFNLEdBQU4sQ0FBZixHQUE0QixXQURzQjtBQUFBLEtBQWY7QUFBQSxHQUFUO0FBQUEsQ0FBbkI7Ozs7O0FDbkpQOzs7Ozs7QUFFQTtBQUNBLElBQU0sa0JBQWtCLCtCQUFnQjtBQUN0QyxZQUFVO0FBRDRCLENBQWhCLENBQXhCOztBQUlBO0FBQ0EsSUFBTSx1QkFBdUIsK0JBQWdCO0FBQzNDLFlBQVUsK0JBRGlDO0FBRTNDLGdCQUFjLHlCQUY2QjtBQUczQyxpQkFBZSxPQUg0QjtBQUkzQyxlQUFhO0FBSjhCLENBQWhCLENBQTdCOztBQU9BO0FBQ0EsSUFBTSx3QkFBd0IsK0JBQWdCO0FBQzVDLFlBQVUsZ0NBRGtDO0FBRTVDLGlCQUFlO0FBRjZCLENBQWhCLENBQTlCOztBQUtBO0FBQ0EsSUFBTSwwQkFBMEIsK0JBQWdCO0FBQzlDLFlBQVU7QUFEb0MsQ0FBaEIsQ0FBaEMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiXG4vKiogXG4gIERpcmVjdGlvbiBhd2FyZSBjb250ZW50IHJldmVhbHMuXG4gIFxuICBAcGFyYW0ge09iamVjdH0gb2JqZWN0IC0gQ29udGFpbmVyIGZvciBhbGwgb3B0aW9ucy5cbiAgQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yIC0gQ29udGFpbmVyIGVsZW1lbnQgc2VsZWN0b3IuXG4gIEBwYXJhbSB7c3RyaW5nfSBpdGVtU2VsZWN0b3IgLSBJdGVtIGVsZW1lbnQgc2VsZWN0b3IuXG4gIEBwYXJhbSB7c3RyaW5nfSBhbmltYXRpb25OYW1lIC0gQW5pbWF0aW9uIENTUyBjbGFzcy5cbiAgQHBhcmFtIHtib2xsZWFufSBlbmFibGVUb3VjaCAgLSBBZGRzIHRvdWNoIGV2ZW50IHRvIHNob3cgY29udGVudCBvbiBmaXJzdCBjbGljayB0aGVuIGZvbGxvdyBsaW5rIG9uIHRoZSBzZWNvbmQgY2xpY2suXG4gIEBwYXJhbSB7aW50ZWdlcn0gdG91Y2hUaHJlc2hvbGQgLSBUb3VjaCBsZW5ndGggbXVzdCBiZSBsZXNzIHRoYW4gdGhpcyB0byB0cmlnZ2VyIHJldmVhbCB3aGljaCBwcmV2ZW50cyB0aGUgZXZlbnQgdHJpZ2dlcmluZyBpZiB1c2VyIGlzIHNjcm9sbGluZy5cbiovXG5cbmNvbnN0IERpcmVjdGlvblJldmVhbCA9IGZ1bmN0aW9uKHtcbiAgc2VsZWN0b3I6IHNlbGVjdG9yID0gJy5kaXJlY3Rpb24tcmV2ZWFsJyxcbiAgaXRlbVNlbGVjdG9yOiBpdGVtU2VsZWN0b3IgPSAnLmRpcmVjdGlvbi1yZXZlYWxfX2NhcmQnLFxuICBhbmltYXRpb25OYW1lOiBhbmltYXRpb25OYW1lID0gJ3N3aW5nJyxcbiAgZW5hYmxlVG91Y2g6IGVuYWJsZVRvdWNoID0gdHJ1ZSxcbiAgdG91Y2hUaHJlc2hvbGQ6IHRvdWNoVGhyZXNob2xkID0gMjUwXG59ID0ge30pIHtcblxuICBjb25zdCBjb250YWluZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gIGxldCB0b3VjaFN0YXJ0O1xuXG5cbiAgY29uc3QgX2dldERpcmVjdGlvbiA9IGZ1bmN0aW9uIChlLCBpdGVtKSB7XG4gICAgLy8gV2lkdGggYW5kIGhlaWdodCBvZiBjdXJyZW50IGl0ZW1cbiAgICBsZXQgdyA9IGl0ZW0ub2Zmc2V0V2lkdGg7XG4gICAgbGV0IGggPSBpdGVtLm9mZnNldEhlaWdodDtcbiAgICBsZXQgcG9zaXRpb24gPSBfZ2V0UG9zaXRpb24oaXRlbSk7XG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIHgveSB2YWx1ZSBvZiB0aGUgcG9pbnRlciBlbnRlcmluZy9leGl0aW5nLCByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIHRoZSBpdGVtLlxuICAgIGxldCB4ID0gKGUucGFnZVggLSBwb3NpdGlvbi54IC0gKHcgLyAyKSAqICh3ID4gaCA/IChoIC8gdykgOiAxKSk7XG4gICAgbGV0IHkgPSAoZS5wYWdlWSAtIHBvc2l0aW9uLnkgLSAoaCAvIDIpICogKGggPiB3ID8gKHcgLyBoKSA6IDEpKTtcbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgdGhlIGFuZ2xlIHRoZSBwb2ludGVyIGVudGVyZWQvZXhpdGVkIGFuZCBjb252ZXJ0IHRvIGNsb2Nrd2lzZSBmb3JtYXQgKHRvcC9yaWdodC9ib3R0b20vbGVmdCA9IDAvMS8yLzMpLiAgU2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zNjQ3NjM0IGZvciBhIGZ1bGwgZXhwbGFuYXRpb24uXG4gICAgbGV0IGQgPSBNYXRoLnJvdW5kKE1hdGguYXRhbjIoeSwgeCkgLyAxLjU3MDc5NjMzICsgNSkgJSA0O1xuXG4gICAgLy8gY29uc29sZS50YWJsZShbeCwgeSwgdywgaCwgZS5wYWdlWCwgZS5wYWdlWSwgaXRlbS5vZmZzZXRMZWZ0LCBpdGVtLm9mZnNldFRvcCwgcG9zaXRpb24ueCwgcG9zaXRpb24ueV0pO1xuICBcbiAgICByZXR1cm4gZDtcbiAgfTtcblxuXG4gIC8vIGh0dHBzOi8vd3d3LmtpcnVwYS5jb20vaHRtbDUvZ2V0X2VsZW1lbnRfcG9zaXRpb25fdXNpbmdfamF2YXNjcmlwdC5odG1cbiAgY29uc3QgX2dldFBvc2l0aW9uID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgbGV0IHhQb3MgPSAwO1xuICAgIGxldCB5UG9zID0gMDtcbiAgIFxuICAgIHdoaWxlIChlbCkge1xuICAgICAgeFBvcyArPSAoZWwub2Zmc2V0TGVmdCArIGVsLmNsaWVudExlZnQpO1xuICAgICAgeVBvcyArPSAoZWwub2Zmc2V0VG9wICsgZWwuY2xpZW50VG9wKTtcbiAgIFxuICAgICAgZWwgPSBlbC5vZmZzZXRQYXJlbnQ7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICB4OiB4UG9zLFxuICAgICAgeTogeVBvc1xuICAgIH07XG4gIH1cbiAgICBcbiAgY29uc3QgX3RyYW5zbGF0ZURpcmVjdGlvbiA9IHN3aXRjaGNhc2Uoe1xuICAgIDA6ICd0b3AnLFxuICAgIDE6ICdyaWdodCcsXG4gICAgMjogJ2JvdHRvbScsXG4gICAgMzogJ2xlZnQnXG4gIH0pKCd0b3AnKTtcbiAgXG5cbiAgY29uc3QgX2FkZENsYXNzID0gZnVuY3Rpb24gKGUsIHN0YXRlKSB7XG4gICAgbGV0IGN1cnJlbnRJdGVtID0gZS5jdXJyZW50VGFyZ2V0O1xuICAgIGxldCBkaXJlY3Rpb24gPSBfZ2V0RGlyZWN0aW9uKGUsIGN1cnJlbnRJdGVtKTtcbiAgICBsZXQgZGlyZWN0aW9uU3RyaW5nID0gX3RyYW5zbGF0ZURpcmVjdGlvbihkaXJlY3Rpb24pO1xuXG4gICAgLy8gUmVtb3ZlIGN1cnJlbnQgYW5pbWF0aW9uIGNsYXNzZXMgYW5kIGFkZCBjdXJyZW50IG9uZS5cbiAgICBsZXQgY3VycmVudENzc0NsYXNzZXMgPSBjdXJyZW50SXRlbS5jbGFzc05hbWUuc3BsaXQoJyAnKTtcbiAgICBsZXQgZmlsdGVyZWRDc3NDbGFzc2VzID0gY3VycmVudENzc0NsYXNzZXMuZmlsdGVyKChjc3NDbGFzcykgPT4gKCFjc3NDbGFzcy5zdGFydHNXaXRoKGFuaW1hdGlvbk5hbWUpKSkuam9pbignICcpO1xuICAgIGN1cnJlbnRJdGVtLmNsYXNzTmFtZSA9IGZpbHRlcmVkQ3NzQ2xhc3NlcztcbiAgICBjdXJyZW50SXRlbS5jbGFzc0xpc3QuYWRkKGAke2FuaW1hdGlvbk5hbWV9LS0ke3N0YXRlfS0ke2RpcmVjdGlvblN0cmluZ31gKTtcbiAgfTtcblxuICBcbiAgY29uc3QgX2JpbmRFdmVudHMgPSBmdW5jdGlvbiAoY29udGFpbmVySXRlbSkge1xuICAgIGNvbnN0IGl0ZW1zID0gY29udGFpbmVySXRlbS5xdWVyeVNlbGVjdG9yQWxsKGl0ZW1TZWxlY3Rvcik7XG5cbiAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7ICAgXG4gICAgICBcbiAgICAgIF9hZGRFdmVudExpc3RlbmVyTXVsdGkoaXRlbSwgWydtb3VzZWVudGVyJywgJ2ZvY3VzJ10sIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgX2FkZENsYXNzKGUsICdpbicpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIF9hZGRFdmVudExpc3RlbmVyTXVsdGkoaXRlbSwgWydtb3VzZWxlYXZlJywgJ2JsdXInXSwgZnVuY3Rpb24oZSkge1xuICAgICAgICBfYWRkQ2xhc3MoZSwgJ291dCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChlbmFibGVUb3VjaCkge1xuXG4gICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICB0b3VjaFN0YXJ0ID0gK25ldyBEYXRlO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgIGxldCB0b3VjaFRpbWUgPSArbmV3IERhdGUgLSB0b3VjaFN0YXJ0O1xuXG4gICAgICAgICAgaWYgKHRvdWNoVGltZSA8IHRvdWNoVGhyZXNob2xkICYmIGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLWhvdmVyJykgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGl0ZW0uc2V0QXR0cmlidXRlKCdkYXRhLWhvdmVyJywgJ3RydWUnKTtcbiAgICAgICAgICAgIF9hZGRDbGFzcyhlLCAnaW4nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICB9XG5cbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBfYWRkRXZlbnRMaXN0ZW5lck11bHRpID0gZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50cywgZm4pIHtcbiAgICBldmVudHMuZm9yRWFjaCgoZSkgPT4gZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGUsIGZuKSk7XG4gIH1cblxuXG4gIGNvbnN0IGluaXQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICBpZiAoY29udGFpbmVycy5sZW5ndGgpIHtcbiAgICAgIGNvbnRhaW5lcnMuZm9yRWFjaCgoY29udGFpbmVySXRlbSkgPT4ge1xuICAgICAgICBfYmluZEV2ZW50cyhjb250YWluZXJJdGVtKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgfTtcblxuICAvLyBJbml0IGlzIGNhbGxlZCBieSBkZWZhdWx0XG4gIGluaXQoKTtcblxuXG4gIC8vIFJldmVhbCBBUElcbiAgcmV0dXJuIHtcbiAgICBpbml0XG4gIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBEaXJlY3Rpb25SZXZlYWw7XG5cblxuLy8gQmV0dGVyIHN3aXRjaCBjYXNlcyAtIGh0dHBzOi8vaGFja2Vybm9vbi5jb20vcmV0aGlua2luZy1qYXZhc2NyaXB0LWVsaW1pbmF0ZS10aGUtc3dpdGNoLXN0YXRlbWVudC1mb3ItYmV0dGVyLWNvZGUtNWM4MWMwNDQ3MTZkXG5leHBvcnQgY29uc3Qgc3dpdGNoY2FzZSA9IGNhc2VzID0+IGRlZmF1bHRDYXNlID0+IGtleSA9Plxua2V5IGluIGNhc2VzID8gY2FzZXNba2V5XSA6IGRlZmF1bHRDYXNlO1xuIiwiaW1wb3J0IERpcmVjdGlvblJldmVhbCBmcm9tICcuL2RpcmVjdGlvbi1yZXZlYWwuanMnO1xuXG4vLyBTd2luZyBhbmltYXRpb24oRGVmYXVsdClcbmNvbnN0IGRpcmVjdGlvblJldmVhbCA9IERpcmVjdGlvblJldmVhbCh7XG4gIHNlbGVjdG9yOiAnLmRpcmVjdGlvbi1yZXZlYWwtLWRlbW8tc3dpbmcnXG59KTtcblxuLy8gU2xpZGUgYW5pbWF0aW9uIHdpdGggYWxsIG9wdGlvbnMgc3BlY2lmaWVkXG5jb25zdCBkaXJlY3Rpb25SZXZlYWxTbGlkZSA9IERpcmVjdGlvblJldmVhbCh7XG4gIHNlbGVjdG9yOiAnLmRpcmVjdGlvbi1yZXZlYWwtLWRlbW8tc2xpZGUnLFxuICBpdGVtU2VsZWN0b3I6ICcuZGlyZWN0aW9uLXJldmVhbF9fY2FyZCcsXG4gIGFuaW1hdGlvbk5hbWU6ICdzbGlkZScsXG4gIGVuYWJsZVRvdWNoOiB0cnVlXG59KTtcblxuLy8gUm90YXRlIGFuaW1hdGlvblxuY29uc3QgZGlyZWN0aW9uUmV2ZWFsUm90YXRlID0gRGlyZWN0aW9uUmV2ZWFsKHtcbiAgc2VsZWN0b3I6ICcuZGlyZWN0aW9uLXJldmVhbC0tZGVtby1yb3RhdGUnLFxuICBhbmltYXRpb25OYW1lOiAncm90YXRlJ1xufSk7XG5cbi8vIEJvb3RzdHJhcCBkZW1vXG5jb25zdCBkaXJlY3Rpb25SZXZlYWxCb29zdHJhcCA9IERpcmVjdGlvblJldmVhbCh7XG4gIHNlbGVjdG9yOiAnLmRpcmVjdGlvbi1yZXZlYWwtLWRlbW8tYm9vdHN0cmFwJ1xufSk7XG4iXX0="}